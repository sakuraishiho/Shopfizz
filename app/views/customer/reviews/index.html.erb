<div class="mb-8 text-center">
  <span class="text-3xl font-bold">
    レビュー一覧
  </span>
  <br>
  <section class="mt-6">
  <div class="container mx-auto">
    <div class="flex justify-center">
      <div class="w-full md:w-1/2">
        <div class="shadow-lg rounded-lg mb-6" style="background-color: #fffaf0;">
          <header class="p-4 border-b">
            <h2 class="text-xl font-semibold">
              <%= @product.name %>
            </h2>
          </header>
          <div class="p-4">
            <div class="flex items-center">
              <div class="relative">
                <div class="absolute top-0 left-0 bg-yellow-400 h-full" style="width: "></div>
                <div class="star-rating mb-2">
                <div class="star-rating-front" style="width: <%= @product.review_score_percentage %>%">★★★★★</div>
                  <div class="star-rating-back text-yellow-400">★★★★★</div>
                </div>
              </div>
              <br>
              <div class="ml-3 pt-2 text-sm text-gray-600">
                <%= @product.avg_score %>点（<%= @product.reviews.count %>件のレビュー）
              </div>
            </div>
          </div>
        </div>
        
        <table class="min-w-full shadow-lg rounded-lg mx-auto" style="background-color: #fffaf0;">
          <thead>
            <tr class="border-b">
              <th class="px-4 py-2 text-sm text-gray-600 text-center">ユーザー</th>
              <th class="px-4 py-2 text-sm text-gray-600 text-center">点数</th>
              <th class="px-4 py-2 text-sm text-gray-600 text-center">内容</th>
            </tr>
          </thead>
          <tbody>
            <% @reviews.each do |review| %>
              <tr class="border-b">
                <td class="px-4 py-2 text-sm text-gray-700 text-center">
                  <%= review.customer.name.presence || '&nbsp;' %>
                </td>
                <td class="px-4 py-2 text-sm text-gray-700 text-center">
                  <%= review.score.presence || '&nbsp;' %>
                </td>
                <td class="px-4 py-2 text-sm text-gray-700 text-center">
                  <%= review.content.presence || '&nbsp;' %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
        <div class="mt-6 text-start">
          <%= link_to '<<商品一覧に戻る', products_path, class: 'text-blue-500 hover:underline' %>
        </div>
      </div>
    </div>
  </div>
</section>

